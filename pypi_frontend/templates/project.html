{% extends "page.html" %}

{% block title %}
{{ project.name }} Â· {{ super() }}
{% endblock title %}

{% block page_banner %}
<div class="row" style="padding-bottom: 3em; padding-top: 2em">
  <div class="col-md-6">
    <h1> {{ project.name }} {{ release.version }}</h1>
    <br>
    <span class="pip-command" id="pip-command">pip install {{ project.name }}</span>
  </div>

  <div class="offset-md-2 col-md-4 text-end">
    <br><br><br>
    <!-- Here will go the "latest" (or not latest/release candidate) badge. -->

    <span data-source="release_date">
    </span>
  </div>
</div>
{% endblock page_banner %}


{% block banner_split %}
<div data-source="summary">
    &nbsp;
</div>
{% endblock banner_split %}


{% block page_content %}
    <div class="container">
      <div class="row">

        <div class="col-md-3">
          <a href="{{ url_for('project', project_name=project.name) }}">{{ project.name }}</a>
          <ul>
          {% for release in project.releases()|reverse %}
            <li><a href="{{ url_for('project_release', project_name=project.name, release=release.version) }}">{{ release.version }}</a></li>
          {% endfor %}
          </ul>
        </div>
      <div class="col-md-9" data-source="description">
      </div>
      </div>
    </div>
{% endblock page_content %}


{% block extra_footer %}
<script src="{{ url_for('static', path='/js/pypi.project.js') }}"></script>
<script>
  $.getJSON("{{ url_for('api_project_release', project_name=project.name, release=release.version) }}", function( data ) {

    date = new Date(data['info']['creation_date']);
    if(!isNaN(date.getTime())) {
        date = date.toLocaleString('default', { month: 'short' }) + ' ' + date.getDate() + ', ' + date.getFullYear();
    } else {
        date = "Unknown";
    }
     $('[data-source="release_date"]').text('Released: ' + date);
     $('[data-source="summary"]').text(data['info']['summary']);
     $('[data-source="description"]').html(data['info']['description']);

  });
</script>
{% endblock extra_footer %}
